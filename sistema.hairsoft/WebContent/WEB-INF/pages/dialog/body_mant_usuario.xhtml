<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	
	<p:dialog id="dialogo-agregar-usuario"  onShow="true" widgetVar="dlg-agregar-usuario" header="Agregar Nuevo Cliente"  width="800" style="min-height:250px;height:auto !important;" responsive="true"  modal="true" closeOnEscape="true">
 		<h:form id="form-dlg-agregar-usuario"> 
   			<p:fieldset legend="Agregar Usuario">
				<h:panelGrid columns="4" cellpadding="5" style="width:100%;">
					<h:outputText value="Nombre*" style="font-weight:bold"/>	
					<p:inputText value="#{usuarioMBean.usuario.nombreUsuario}" maxlength="50" size="30" required="true" requiredMessage="Nombre debe ser obligatorio"/>

					<h:outputText value="Apellido*" style="font-weight:bold"/>	
					<p:inputText value="#{usuarioMBean.usuario.apellidoUsuario}" maxlength="50" size="30" required="true" requiredMessage="Apellido debe ser obligatorio"/>
					
					<h:outputText value="Rut*" style="font-weight:bold"/>	
					<p:inputText value="#{usuarioMBean.usuario.rutUsuario}" maxlength="8" size="10" required="true" validatorMessage="El Rut debe ser numérico" requiredMessage="Rut debe ser obligatorio">
						<f:validateRegex pattern="^[0-9]*$"/>
					</p:inputText>

					<h:outputText value="DV*" style="font-weight:bold"/>	
					<p:inputText value="#{usuarioMBean.usuario.dvUsuario}" maxlength="1" size="2" required="true" validatorMessage="El DV debe estar entre 0 a 9 o K " requiredMessage="DV debe ser obligatorio">
						<f:validateRegex pattern="^[Kk0-9]"/>
					</p:inputText>
					<h:outputText value="Teléfono*" style="font-weight:bold"/>	
					<p:inputText value="#{usuarioMBean.usuario.telefonoUsuario}" maxlength="13" size="30" required="true" validatorMessage="El teléfono debe ser numérico" requiredMessage="Teléfono debe ser obligatorio">
						<f:validateRegex pattern="^[0-9]*$"/>
					</p:inputText>
						
					<h:outputText value="Email*" style="font-weight:bold"/>	
					<p:inputText value="#{usuarioMBean.usuario.emailUsuario}" maxlength="50" size="30" required="true" validatorMessage="El formato del email es incorrecto. Favor Revisar" requiredMessage="Email debe ser obligatorio">
						<f:validateRegex pattern="^[A-Za-z0-9._%+-]+@[A-Za-z0-9]+\.[A-Za-z]{2,4}$"/>
					</p:inputText>
					
					<h:outputText value="Contrase&#241;a*" style="font-weight:bold"/>
					<p:password id="nonFeedback" value="#{usuarioMBean.usuario.contrasenaUsuario}" maxlength="25" size="30" required="true" requiredMessage="Contrase&#241;a debe ser obligatorio"/>		
				
				</h:panelGrid>			
				<br/>
				<h:panelGrid columns="2" cellpadding="5" style="margin: 0 auto;">
					<p:commandButton value="Guardar Cambios" 
										icon="ui-icon-disk"  
										action="#{usuarioMBean.insertarUsuario()}"  
										update="panel-usuario, form-dlg-agregar-usuario, :form-tabla-mantenedor-usuario:dt-tabla-mantenedor-usuario"
										onstart="PF('dialogo-loading').show()" 
										oncomplete="PF('dialogo-loading').hide()"/>
					<p:commandButton value="Cerrar" update="@form" proccess="@this" icon="ui-icon-close" onclick="PF('dlg-agregar-usuario').hide();" type="button" >
						<p:ajax update="form-dlg-agregar-usuario" resetValues="true" />
					</p:commandButton>							
				</h:panelGrid>
			</p:fieldset>	
		</h:form>
	</p:dialog>
	
</html>